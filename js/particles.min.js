function init(){container=document.createElement("div");document.getElementById("lyrics").appendChild(container);window.addEventListener("resize",onWindowResize,false);camera=new THREE.Camera(75,window.innerWidth/window.innerHeight,1,5000);camera.position.z=1000;scene=new THREE.Scene();var b=new THREE.ParticleBasicMaterial({map:new THREE.Texture(generateSprite()),blending:THREE.AdditiveBlending});for(var a=0;a<250;a++){particle=new THREE.Particle(b);initParticle(particle,a*50);scene.addObject(particle)}canvasCreated=true;renderer=new THREE.CanvasRenderer();renderer.setSize(window.innerWidth,window.innerHeight);renderer.sortElements=false;container.appendChild(renderer.domElement);document.addEventListener("mousemove",onDocumentMouseMove,false);document.addEventListener("touchstart",onDocumentTouchStart,false);document.addEventListener("touchmove",onDocumentTouchMove,false)}function generateSprite(){var a=document.createElement("canvas");a.width=50;a.height=50;var b=a.getContext("2d");var c=b.createRadialGradient(a.width/2,a.height/2,0,a.width/2,a.height/2,a.width/2);c.addColorStop(0,"rgba(255,255,255,1)");c.addColorStop(0.2,"rgba(255,51,51,1)");c.addColorStop(0.4,"rgba(51,0,0,1)");c.addColorStop(1,"rgba(0,0,0,1)");b.fillStyle=c;b.fillRect(0,0,a.width,a.height);return a}function initParticle(b,a){var b=this instanceof THREE.Particle?this:b;var a=a!==undefined?a:0;b.position.x=0;b.position.y=0;b.position.z=0;b.scale.x=b.scale.y=Math.random()*3+1;new TWEEN.Tween(b).delay(a).to({},10000).onComplete(initParticle).start();new TWEEN.Tween(b.position).delay(a).to({x:Math.random()*4000-2000,y:Math.random()*1000-500,z:Math.random()*4000-2000},10000).start();new TWEEN.Tween(b.scale).delay(a).to({x:0,y:0},10000).start()}function onDocumentMouseMove(a){mouseX=a.clientX-windowHalfX;mouseY=a.clientY-windowHalfY}function onDocumentTouchStart(a){if(a.touches.length==1){a.preventDefault();mouseX=a.touches[0].pageX-windowHalfX;mouseY=a.touches[0].pageY-windowHalfY}}function onDocumentTouchMove(a){if(a.touches.length==1){a.preventDefault();mouseX=a.touches[0].pageX-windowHalfX;mouseY=a.touches[0].pageY-windowHalfY}}function animate(){requestAnimationFrame(animate);render()}function render(){TWEEN.update();camera.position.x+=(mouseX-camera.position.x)*0.05;camera.position.y+=(-mouseY-camera.position.y)*0.05;renderer.render(scene,camera)}function onWindowResize(c){var b=window.innerWidth,a=window.innerHeight;camera.aspect=b/a;camera.updateProjectionMatrix();renderer.setSize(b,a);renderer.domElement.style.width=window.innerWidth+"px";renderer.domElement.style.height=window.innerHeight+"px"};